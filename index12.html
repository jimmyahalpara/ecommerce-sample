<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIOLET | Digital Store</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Nunito', 'sans-serif'],
                    },
                    colors: {
                        violet: {
                            50: '#f5f3ff', // Very light background
                            100: '#ede9fe', // Soft lilac
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            500: '#8b5cf6', // Main Purple
                            600: '#7c3aed', // Hover Purple
                            700: '#6d28d9', // Deep Purple (Buttons)
                            900: '#4c1d95', // Text
                        },
                        accent: {
                            yellow: '#fcd34d', // Pop color for tags
                        }
                    },
                    borderRadius: {
                        'xl': '1rem',
                        '2xl': '1.5rem',
                        '3xl': '2rem',
                    },
                    boxShadow: {
                        'flat': '0 4px 0 0 rgba(109, 40, 217, 0.2)',
                        'flat-hover': '0 6px 0 0 rgba(109, 40, 217, 0.2)',
                        'card': '0 10px 15px -3px rgba(139, 92, 246, 0.1), 0 4px 6px -2px rgba(139, 92, 246, 0.05)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Soft Scroll */
        html { scroll-behavior: smooth; }
        
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Button Press Effect */
        .btn-press:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* Floating shapes background */
        .bg-shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.4;
            z-index: -1;
        }
    </style>
</head>
<body class="bg-violet-50 text-violet-900 font-sans antialiased overflow-x-hidden selection:bg-violet-300 selection:text-violet-900 pb-20 relative">

    <!-- Background Shapes -->
    <div class="bg-shape bg-violet-200 w-96 h-96 top-[-10%] left-[-10%] blur-3xl"></div>
    <div class="bg-shape bg-violet-200 w-80 h-80 bottom-[10%] right-[-5%] blur-3xl"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 px-4 py-4">
        <div class="max-w-7xl mx-auto bg-white/90 backdrop-blur-md rounded-2xl shadow-card px-6 py-3 flex justify-between items-center border border-violet-100">
            
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-violet-700 p-2 hover:bg-violet-50 rounded-lg transition">
                <i class="fas fa-bars text-xl"></i>
            </button>

            <!-- Logo -->
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.scrollTo(0,0)">
                <div class="w-8 h-8 bg-violet-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-flat">
                    V
                </div>
                <span class="text-2xl font-extrabold tracking-tight text-violet-900">Violet.</span>
            </div>

            <!-- Desktop Nav -->
            <div class="hidden md:flex space-x-1 bg-violet-50 p-1 rounded-xl">
                <a href="#" class="px-4 py-2 rounded-lg font-bold text-sm text-violet-900 bg-white shadow-sm">Shop</a>
                <a href="#" class="px-4 py-2 rounded-lg font-bold text-sm text-violet-600 hover:bg-white/50 transition">New</a>
                <a href="#" class="px-4 py-2 rounded-lg font-bold text-sm text-violet-600 hover:bg-white/50 transition">Sale</a>
            </div>

            <!-- Actions -->
            <div class="flex items-center space-x-3">
                <button id="nav-search-btn" class="w-10 h-10 rounded-xl bg-violet-100 text-violet-700 flex items-center justify-center hover:bg-violet-200 transition">
                    <i class="fas fa-search"></i>
                </button>
                <button id="nav-wishlist-btn" class="w-10 h-10 rounded-xl bg-violet-100 text-violet-700 flex items-center justify-center hover:bg-violet-200 transition relative">
                    <i class="fas fa-heart"></i>
                    <span id="wishlist-dot" class="absolute top-2 right-2 w-2.5 h-2.5 bg-accent-yellow border-2 border-white rounded-full hidden"></span>
                </button>
                <button id="nav-cart-btn" class="hidden md:flex items-center gap-2 bg-violet-700 text-white px-4 py-2 rounded-xl font-bold shadow-flat hover:shadow-flat-hover hover:-translate-y-0.5 transition btn-press">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Cart (0)</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="fixed inset-0 z-[55] hidden">
        <div class="absolute inset-0 bg-violet-900/20 backdrop-blur-sm" id="close-mobile-menu-backdrop"></div>
        <div id="mobile-menu-panel" class="absolute inset-y-4 left-4 w-72 bg-white rounded-2xl shadow-2xl transform -translate-x-[110%] transition-transform duration-300 ease-out flex flex-col p-6 border border-violet-100">
            <div class="flex justify-between items-center mb-8">
                <span class="text-xl font-extrabold text-violet-900">Menu</span>
                <button id="close-mobile-menu" class="w-8 h-8 bg-violet-50 rounded-lg flex items-center justify-center text-violet-500 hover:bg-violet-100">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-2">
                <a href="#" class="block px-4 py-3 rounded-xl bg-violet-50 text-violet-900 font-bold hover:bg-violet-100 transition">Shop All</a>
                <a href="#" class="block px-4 py-3 rounded-xl text-violet-600 font-bold hover:bg-violet-50 transition">New Arrivals</a>
                <a href="#" class="block px-4 py-3 rounded-xl text-violet-600 font-bold hover:bg-violet-50 transition">Trending</a>
                <a href="#" class="block px-4 py-3 rounded-xl text-violet-600 font-bold hover:bg-violet-50 transition">Sale</a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-28 px-4">
        
        <!-- Hero Section (Floating Card Style) -->
        <section class="max-w-7xl mx-auto bg-violet-600 rounded-3xl overflow-hidden shadow-card mb-16 relative group">
            <!-- Vector-like shapes -->
            <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-bl-[100%]"></div>
            <div class="absolute bottom-0 left-0 w-48 h-48 bg-violet-900 opacity-10 rounded-tr-[100%]"></div>

            <div class="flex flex-col md:flex-row items-center">
                <div class="w-full md:w-1/2 p-8 md:p-16 text-center md:text-left z-10">
                    <span class="inline-block px-3 py-1 bg-accent-yellow text-violet-900 text-xs font-extrabold uppercase tracking-wider rounded-full mb-6 transform -rotate-2">New Drop</span>
                    <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-6 leading-tight">
                        Style for the <br> Digital Age.
                    </h1>
                    <p class="text-violet-100 text-lg mb-8 font-medium max-w-md mx-auto md:mx-0">
                        Curated collections with a focus on comfort, color, and clean lines.
                    </p>
                    <button onclick="document.getElementById('catalog').scrollIntoView({behavior: 'smooth'})" class="bg-white text-violet-700 px-8 py-4 rounded-xl font-bold shadow-[0_4px_0_0_rgba(0,0,0,0.1)] hover:-translate-y-1 hover:shadow-[0_6px_0_0_rgba(0,0,0,0.1)] transition btn-press">
                        Start Shopping
                    </button>
                </div>
                <div class="w-full md:w-1/2 h-64 md:h-[500px] relative">
                    <img src="https://images.unsplash.com/photo-1539109136881-3be0616acf4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover object-center mix-blend-normal">
                    <!-- Decorative floating UI element -->
                    <div class="absolute bottom-8 left-8 bg-white/90 backdrop-blur px-4 py-3 rounded-xl shadow-lg hidden md:block transform rotate-2">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tshirt text-violet-600"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 font-bold">Featured</p>
                                <p class="text-sm font-extrabold text-violet-900">Summer Set</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Catalog Section -->
        <section id="catalog" class="max-w-7xl mx-auto pb-24">
            
            <!-- Filter Bar -->
            <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
                <div>
                    <h2 class="text-3xl font-extrabold text-violet-900">Fresh Picks</h2>
                    <p class="text-violet-500 font-medium mt-1">Updating your wardrobe, simply.</p>
                </div>
                
                <!-- Simple Chips -->
                <div class="flex gap-2 overflow-x-auto pb-2 w-full md:w-auto no-scrollbar">
                    <button class="px-5 py-2 rounded-xl bg-violet-700 text-white font-bold text-sm whitespace-nowrap shadow-flat">All Items</button>
                    <button class="px-5 py-2 rounded-xl bg-white text-violet-600 border border-violet-100 font-bold text-sm whitespace-nowrap hover:bg-violet-50 transition">Clothing</button>
                    <button class="px-5 py-2 rounded-xl bg-white text-violet-600 border border-violet-100 font-bold text-sm whitespace-nowrap hover:bg-violet-50 transition">Shoes</button>
                    <button class="px-5 py-2 rounded-xl bg-white text-violet-600 border border-violet-100 font-bold text-sm whitespace-nowrap hover:bg-violet-50 transition">Accessories</button>
                </div>
            </div>

            <!-- Product Grid -->
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Products Injected -->
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-violet-100 py-16 mt-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 text-center md:text-left">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center justify-center md:justify-start gap-2 mb-4">
                        <div class="w-6 h-6 bg-violet-600 rounded-md flex items-center justify-center text-white font-bold text-xs">V</div>
                        <span class="text-xl font-extrabold text-violet-900">Violet.</span>
                    </div>
                    <p class="text-violet-400 text-sm font-medium max-w-xs mx-auto md:mx-0">
                        Making fashion simple, colorful, and fun. Designed for everyone, everywhere.
                    </p>
                </div>
                <div>
                    <h4 class="font-extrabold text-violet-900 mb-4">Links</h4>
                    <ul class="space-y-2 text-sm font-medium text-violet-500">
                        <li><a href="#" class="hover:text-violet-700 transition">About</a></li>
                        <li><a href="#" class="hover:text-violet-700 transition">Careers</a></li>
                        <li><a href="#" class="hover:text-violet-700 transition">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-extrabold text-violet-900 mb-4">Socials</h4>
                    <div class="flex justify-center md:justify-start gap-4">
                        <a href="#" class="w-10 h-10 bg-violet-50 rounded-lg flex items-center justify-center text-violet-600 hover:bg-violet-100 transition"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="w-10 h-10 bg-violet-50 rounded-lg flex items-center justify-center text-violet-600 hover:bg-violet-100 transition"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-violet-50 text-center text-xs font-bold text-violet-300">
                Â© 2024 Violet Store Inc. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Search Overlay -->
    <div id="search-overlay" class="fixed inset-0 z-[60] bg-white/95 backdrop-blur-xl hidden flex flex-col items-center justify-start pt-32 transition-opacity duration-300 px-4">
        <button id="close-search" class="absolute top-6 right-6 w-10 h-10 bg-violet-50 rounded-xl text-violet-600 hover:bg-violet-100 transition flex items-center justify-center">
            <i class="fas fa-times text-lg"></i>
        </button>
        
        <div class="w-full max-w-xl text-center">
            <h2 class="font-extrabold text-2xl text-violet-900 mb-8">What are you looking for?</h2>
            <div class="relative">
                <input type="text" id="search-input" placeholder="Type 'Sneakers'..." class="w-full bg-violet-50 border-2 border-transparent focus:border-violet-300 text-xl font-bold text-violet-900 py-4 px-6 rounded-2xl focus:outline-none transition-all shadow-inner">
                <button class="absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 bg-violet-600 text-white rounded-xl flex items-center justify-center shadow-flat hover:scale-105 transition">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <div class="mt-6 flex flex-wrap justify-center gap-2">
                <span class="text-xs font-bold text-violet-400 uppercase tracking-wide">Popular:</span>
                <a href="#" class="text-xs font-bold text-violet-600 hover:text-violet-800 hover:underline">Summer Tees</a>
                <a href="#" class="text-xs font-bold text-violet-600 hover:text-violet-800 hover:underline">Accessories</a>
            </div>
        </div>
    </div>

    <!-- Product Drawer (Right Slide) -->
    <div id="product-drawer" class="fixed inset-0 z-[100] hidden">
        <!-- Backdrop -->
        <div id="drawer-backdrop" class="absolute inset-0 bg-violet-900/30 backdrop-blur-sm opacity-0 transition-opacity duration-300"></div>

        <!-- Drawer Panel -->
        <div id="drawer-panel" class="absolute inset-y-2 right-2 w-[calc(100%-1rem)] md:w-[450px] bg-white rounded-2xl shadow-2xl transform translate-x-[110%] transition-transform duration-500 cubic-bezier(0.34, 1.56, 0.64, 1) flex flex-col overflow-hidden border border-violet-100">
            
            <!-- Header -->
            <div class="px-6 py-4 border-b border-violet-50 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    <span class="text-xs font-extrabold text-violet-400 uppercase tracking-wide">In Stock</span>
                </div>
                <button id="close-drawer" class="w-8 h-8 bg-violet-50 rounded-lg flex items-center justify-center text-violet-400 hover:text-violet-700 hover:bg-violet-100 transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Content -->
            <div class="flex-1 overflow-y-auto p-6 relative">
                <!-- Image -->
                <div class="aspect-square bg-violet-50 rounded-2xl overflow-hidden mb-6 relative group">
                    <img id="drawer-img" src="" class="w-full h-full object-cover">
                    
                    <!-- Nav -->
                    <div class="absolute bottom-4 right-4 flex gap-2">
                        <button id="drawer-prev" class="w-10 h-10 bg-white rounded-xl shadow-flat flex items-center justify-center text-violet-700 hover:scale-105 transition"><i class="fas fa-chevron-left"></i></button>
                        <button id="drawer-next" class="w-10 h-10 bg-white rounded-xl shadow-flat flex items-center justify-center text-violet-700 hover:scale-105 transition"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>

                <!-- Info -->
                <div class="mb-6">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <span id="drawer-brand" class="text-xs font-bold text-violet-400 uppercase tracking-wide">Brand</span>
                            <h2 id="drawer-title" class="text-2xl font-extrabold text-violet-900 leading-tight">Product Name</h2>
                        </div>
                        <div class="text-right">
                            <p id="drawer-price" class="text-xl font-extrabold text-violet-700">$0.00</p>
                        </div>
                    </div>
                    <p id="drawer-desc" class="text-violet-500 text-sm font-medium leading-relaxed">
                        Description goes here.
                    </p>
                </div>

                <!-- Attributes -->
                <div class="mb-8">
                    <span class="text-xs font-bold text-violet-900 uppercase tracking-wide block mb-3">Size</span>
                    <div class="flex gap-2">
                        <button class="w-10 h-10 rounded-xl border-2 border-violet-100 font-bold text-sm text-violet-600 hover:border-violet-600 hover:text-violet-900 transition">S</button>
                        <button class="w-10 h-10 rounded-xl border-2 border-violet-100 font-bold text-sm text-violet-600 hover:border-violet-600 hover:text-violet-900 transition">M</button>
                        <button class="w-10 h-10 rounded-xl border-2 border-violet-100 font-bold text-sm text-violet-600 hover:border-violet-600 hover:text-violet-900 transition">L</button>
                        <button class="w-10 h-10 rounded-xl border-2 border-violet-100 font-bold text-sm text-violet-600 hover:border-violet-600 hover:text-violet-900 transition">XL</button>
                    </div>
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="p-4 border-t border-violet-50 bg-violet-50/50 flex gap-3">
                <button id="drawer-wishlist-btn" class="w-14 h-14 bg-white border-2 border-violet-100 rounded-xl flex items-center justify-center text-xl text-violet-400 hover:text-red-500 hover:border-red-200 transition shadow-sm">
                    <i class="fas fa-heart"></i>
                </button>
                <button class="flex-1 bg-violet-700 text-white rounded-xl font-bold shadow-flat hover:shadow-flat-hover hover:-translate-y-0.5 transition btn-press">
                    Add to Cart
                </button>
            </div>
        </div>
    </div>

    <!-- Wishlist Sidebar -->
    <div id="wishlist-sidebar" class="fixed inset-0 z-[90] hidden">
        <div id="wishlist-backdrop" class="absolute inset-0 bg-violet-900/20 backdrop-blur-sm opacity-0 transition-opacity duration-300"></div>
        <div id="wishlist-panel" class="absolute inset-y-4 right-4 w-80 bg-white rounded-2xl shadow-2xl transform translate-x-[110%] transition-transform duration-300 ease-out flex flex-col border border-violet-100">
            <div class="p-6 border-b border-violet-50 flex justify-between items-center">
                <h3 class="font-extrabold text-violet-900">Your Likes</h3>
                <button id="close-wishlist" class="text-violet-400 hover:text-violet-700"><i class="fas fa-times"></i></button>
            </div>
            <div id="wishlist-items" class="flex-1 overflow-y-auto p-4 space-y-3">
                <!-- Items -->
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            
            // --- Data ---
            const products = [
                { id: 1, brand: "Sunny Side", title: "Striped Tee", price: 35.00, images: ["https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=800&q=80"], desc: "Soft cotton with a playful stripe pattern. Perfect for sunny days." },
                { id: 2, brand: "Urban Soft", title: "Lavender Hoodie", price: 65.00, images: ["https://images.unsplash.com/photo-1556906781-9a412961c28c?w=800&q=80", "https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?w=800&q=80"], desc: "Cozy fleece in our signature soft purple shade. Oversized fit." },
                { id: 3, brand: "Sunny Side", title: "Denim Shorts", price: 45.00, images: ["https://images.unsplash.com/photo-1591195853828-11db59a44f6b?w=800&q=80", "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=800&q=80"], desc: "Classic cut with a comfortable stretch waist." },
                { id: 4, brand: "Violet Lab", title: "Canvas Tote", price: 25.00, images: ["https://images.unsplash.com/photo-1544816155-12df9643f363?w=800&q=80", "https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=800&q=80"], desc: "Durable canvas bag for your daily essentials. Printed logo." },
                { id: 5, brand: "Footwear", title: "White Sneakers", price: 85.00, images: ["https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=800&q=80", "https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=800&q=80"], desc: "Minimalist white leather sneakers with a comfortable sole." },
                { id: 6, brand: "Urban Soft", title: "Bucket Hat", price: 30.00, images: ["https://images.unsplash.com/photo-1575428652377-a269724075dc?w=800&q=80", "https://images.unsplash.com/photo-1521369909029-2afed882baee?w=800&q=80"], desc: "Cotton twill bucket hat to keep the sun away." }
            ];

            // --- Wishlist Logic ---
            let wishlist = JSON.parse(localStorage.getItem('wishlist_violet')) || [];

            function updateWishlistUI() {
                $('#wishlist-dot').toggleClass('hidden', wishlist.length === 0);
                
                const $container = $('#wishlist-items');
                $container.empty();

                if(wishlist.length === 0) {
                    $container.html('<div class="text-center text-violet-400 py-8 text-sm font-bold">No likes yet!</div>');
                    return;
                }

                wishlist.forEach(id => {
                    const p = products.find(x => x.id === id);
                    if(!p) return;
                    $container.append(`
                        <div class="flex items-center gap-3 p-2 bg-violet-50 rounded-xl">
                            <img src="${p.images[0]}" class="w-12 h-12 rounded-lg object-cover">
                            <div class="flex-1 min-w-0">
                                <h4 class="font-bold text-sm text-violet-900 truncate">${p.title}</h4>
                                <p class="text-xs text-violet-500 font-bold">$${p.price}</p>
                            </div>
                            <button onclick="window.removeWishlist(${p.id})" class="w-8 h-8 rounded-lg bg-white text-violet-300 hover:text-red-400 flex items-center justify-center shadow-sm"><i class="fas fa-times"></i></button>
                        </div>
                    `);
                });
            }

            function toggleWishlist(id) {
                const index = wishlist.indexOf(id);
                if(index === -1) wishlist.push(id);
                else wishlist.splice(index, 1);
                
                localStorage.setItem('wishlist_violet', JSON.stringify(wishlist));
                updateWishlistUI();
                renderProducts();
                
                const $drawerBtn = $('#drawer-wishlist-btn');
                if($drawerBtn.length && !$('#product-drawer').hasClass('hidden')) {
                     const openId = $('#drawer-wishlist-btn').data('id');
                     if(openId === id) updateDrawerBtn(wishlist.includes(id));
                }
            }

            window.removeWishlist = function(id) { toggleWishlist(id); };

            // --- Render Grid ---
            function renderProducts(data = products) {
                const $grid = $('#product-grid');
                $grid.empty();
                
                if (data.length === 0) {
                    $grid.html(`
                        <div class="col-span-full text-center py-20 text-violet-400 font-bold">
                            <i class="fas fa-ghost text-4xl mb-2 opacity-50"></i>
                            <p>Nothing here!</p>
                        </div>
                    `);
                    return;
                }

                data.forEach(p => {
                    const isSaved = wishlist.includes(p.id);
                    const heartClass = isSaved ? 'fas fa-heart text-red-500' : 'far fa-heart text-violet-300 group-hover:text-violet-500';
                    
                    $grid.append(`
                        <div class="bg-white rounded-3xl p-3 shadow-card hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer product-card border border-violet-50" data-id="${p.id}">
                            <div class="relative aspect-[4/5] mb-4 bg-violet-50 rounded-2xl overflow-hidden">
                                <img src="${p.images[0]}" class="w-full h-full object-cover transition duration-500 group-hover:scale-105">
                                
                                <!-- Wishlist Fab -->
                                <button class="absolute top-3 right-3 w-10 h-10 bg-white/80 backdrop-blur rounded-xl shadow-sm flex items-center justify-center transition-transform hover:scale-110 wishlist-trigger" data-id="${p.id}">
                                    <i class="${heartClass} text-lg"></i>
                                </button>
                                
                                <!-- Hover Badge -->
                                <div class="absolute bottom-3 left-3 bg-white/90 backdrop-blur px-3 py-1 rounded-lg shadow-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                    <span class="text-xs font-extrabold text-violet-600 uppercase tracking-wide">Quick View</span>
                                </div>
                            </div>
                            
                            <div class="px-2 pb-2">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-[10px] font-extrabold text-violet-400 uppercase tracking-wider mb-1">${p.brand}</p>
                                        <h3 class="font-bold text-lg text-violet-900 leading-tight">${p.title}</h3>
                                    </div>
                                    <span class="font-extrabold text-lg text-violet-700">$${p.price}</span>
                                </div>
                            </div>
                        </div>
                    `);
                });
            }
            renderProducts();

            // --- Drawer Logic ---
            let currentImages = [];
            let imgIdx = 0;

            function updateDrawerBtn(isSaved) {
                const $btn = $('#drawer-wishlist-btn');
                if(isSaved) {
                    $btn.html('<i class="fas fa-heart"></i>').removeClass('text-violet-400').addClass('text-red-500 border-red-100 bg-red-50');
                } else {
                    $btn.html('<i class="far fa-heart"></i>').addClass('text-violet-400').removeClass('text-red-500 border-red-100 bg-red-50');
                }
            }

            function updateDrawerImage() {
                $('#drawer-img').attr('src', currentImages[imgIdx]);
            }

            function openDrawer(id) {
                const p = products.find(x => x.id === id);
                if(!p) return;

                $('#drawer-brand').text(p.brand);
                $('#drawer-title').text(p.title);
                $('#drawer-price').text(`$${p.price.toFixed(2)}`);
                $('#drawer-desc').text(p.desc);
                $('#drawer-wishlist-btn').data('id', id);
                
                currentImages = p.images;
                imgIdx = 0;
                updateDrawerImage();
                updateDrawerBtn(wishlist.includes(id));

                $('#product-drawer').removeClass('hidden');
                setTimeout(() => {
                    $('#drawer-backdrop').removeClass('opacity-0');
                    $('#drawer-panel').removeClass('translate-x-[110%]');
                }, 10);
                $('body').addClass('overflow-hidden');
            }

            // Listeners
            $(document).on('click', '.product-card', function(e) {
                if($(e.target).closest('.wishlist-trigger').length) return;
                openDrawer($(this).data('id'));
            });

            $(document).on('click', '.wishlist-trigger', function(e) {
                e.stopPropagation();
                toggleWishlist($(this).data('id'));
            });

            $('#drawer-wishlist-btn').click(function() {
                toggleWishlist($(this).data('id'));
            });

            $('#close-drawer, #drawer-backdrop').click(function() {
                $('#drawer-panel').addClass('translate-x-[110%]');
                $('#drawer-backdrop').addClass('opacity-0');
                setTimeout(() => {
                    $('#product-drawer').addClass('hidden');
                    $('body').removeClass('overflow-hidden');
                }, 300);
            });

            $('#drawer-next').click(function() { imgIdx = (imgIdx + 1) % currentImages.length; updateDrawerImage(); });
            $('#drawer-prev').click(function() { imgIdx = (imgIdx - 1 + currentImages.length) % currentImages.length; updateDrawerImage(); });

            // Search
            $('#nav-search-btn').click(() => {
                $('#search-overlay').removeClass('hidden');
                setTimeout(() => {
                    $('#search-overlay').removeClass('opacity-0');
                    $('#search-input').focus();
                }, 10);
            });
            $('#close-search').click(() => {
                $('#search-overlay').addClass('opacity-0');
                setTimeout(() => $('#search-overlay').addClass('hidden'), 300);
            });
            $('#search-input').on('input', function() {
                const val = $(this).val().toLowerCase();
                if(!val) renderProducts(products);
                else renderProducts(products.filter(p => p.title.toLowerCase().includes(val) || p.brand.toLowerCase().includes(val)));
            });

            // Sidebars
            $('#nav-wishlist-btn').click(() => {
                $('#wishlist-sidebar').removeClass('hidden');
                setTimeout(() => {
                    $('#wishlist-backdrop').removeClass('opacity-0');
                    $('#wishlist-panel').removeClass('translate-x-[110%]');
                }, 10);
            });
            $('#close-wishlist, #wishlist-backdrop').click(() => {
                $('#wishlist-panel').addClass('translate-x-[110%]');
                $('#wishlist-backdrop').addClass('opacity-0');
                setTimeout(() => $('#wishlist-sidebar').addClass('hidden'), 300);
            });

            // Mobile Menu
            $('#mobile-menu-btn').click(() => {
                $('#mobile-menu-overlay').removeClass('hidden');
                setTimeout(() => $('#mobile-menu-panel').removeClass('-translate-x-[110%]'), 10);
            });
            $('#close-mobile-menu, #close-mobile-menu-backdrop').click(() => {
                $('#mobile-menu-panel').addClass('-translate-x-[110%]');
                setTimeout(() => $('#mobile-menu-overlay').addClass('hidden'), 300);
            });

            // Init
            updateWishlistUI();
        });
    </script>
</body>
</html>